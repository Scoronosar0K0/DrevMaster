# DrevMaster - Система управления заказами древесины

Веб-приложение для управления заказами, поставщиками, менеджерами и финансовой аналитики в сфере торговли древесиной.

## 🚀 Быстрый старт

### Локальная разработка

```bash
# Клонирование репозитория
git clone https://github.com/your-username/drevmaster.git
cd drevmaster

# Установка зависимостей
npm install

# Создание файла окружения
echo "JWT_SECRET=drevmaster-secret-key-2024" > .env.local

# Запуск в режиме разработки
npm run dev
```

### Деплой на VPS сервере

```bash
# Подключение к серверу
ssh root@194.87.201.205

# Установка Node.js и npm
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
apt-get install -y nodejs

# Клонирование проекта
git clone https://github.com/your-username/drevmaster.git
cd drevmaster

# Установка зависимостей
npm install

# Создание файла окружения
cat > .env.local << EOF
JWT_SECRET=drevmaster-secret-key-2024
NODE_ENV=production
PORT=3000
EOF

# Сборка для продакшена
npm run build

# Запуск приложения
npm start
```

## 🔧 Конфигурация

### Переменные окружения

Создайте файл `.env.local` в корне проекта:

```env
# JWT секрет (обязательно)
JWT_SECRET=drevmaster-secret-key-2024

# Режим работы
NODE_ENV=production

# Порт (опционально, по умолчанию 3000)
PORT=3000
```

### База данных

- SQLite база данных создается автоматически в `database.db`
- Все миграции выполняются автоматически при запуске
- Данные сохраняются локально

## 👥 Пользователи по умолчанию

### Администратор
- **Логин:** admin
- **Пароль:** admin123
- **Роль:** admin

### Менеджер (если создан)
- **Логин:** manager
- **Пароль:** manager123
- **Роль:** manager

## 📱 Функциональность

### Для администратора:
- Управление заказами и поставщиками
- Финансовая аналитика
- Управление менеджерами
- Полный доступ ко всем функциям

### Для менеджера:
- Собственная панель управления
- Управление складом
- Отправка запросов на переводы
- Ограниченный доступ

## 🔐 Безопасность

⚠️ **ВАЖНО:** Измените пароли по умолчанию после первого входа!

### Рекомендации:
1. Измените JWT_SECRET на уникальный
2. Создайте сильные пароли для пользователей
3. Настройте HTTPS для продакшена
4. Регулярно делайте бэкапы базы данных

## 🐛 Устранение неполадок

### Ошибка JWT
Если видите ошибку `JWSSignatureVerificationFailed`:
1. Проверьте переменную `JWT_SECRET` в `.env.local`
2. Перезапустите сервер

### Ошибка базы данных
Если база данных повреждена:
1. Удалите файл `database.db`
2. Перезапустите приложение
3. База создастся заново

### Проблемы с портом
Если порт 3000 занят:
1. Измените `PORT` в `.env.local`
2. Или укажите порт при запуске: `npm start -- -p 3001`

## 📞 Поддержка

При возникновении проблем:
1. Проверьте логи сервера
2. Убедитесь что все зависимости установлены
3. Проверьте права доступа к файлам

## 🛠️ Технологии

- **Frontend:** Next.js 14, React 18, TypeScript, Tailwind CSS
- **Backend:** Next.js API Routes, SQLite (better-sqlite3)
- **Аутентификация:** JWT (jose)
- **Хостинг:** VPS на Timeweb Cloud

---

**DrevMaster v0.1.0** - Система управления заказами древесины
